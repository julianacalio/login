<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>Login</title>
        <meta name="viewport" content="width=device-width"/>
    </h:head>

    <h:body>

        <p:layout fullPage="true"> 

            <p:layoutUnit  position="center">

<!--                <p:messages  showDetail="false" autoUpdate="true" closable="true"/>-->

                <h:form>
                    
                    <h:outputLink id="loginLink" value="javascript:void(0)" onclick="dlg.show()" title="login">   
                        <p:graphicImage library="images" name="login.jpg" />  
                        </h:outputLink>
                    
                    <p:growl id="growl" showDetail="true" life="3000" /> 

                  
                        
                         <p:dialog id="dialog" header="Fazer Login" widgetVar="dlg" resizable="false">  

                        <h:panelGrid columns="2" id="grid">  

                            <h:outputLabel id="output1" style="position: relative; right: 10px" value="Email : *"/>  
                            <p:inputText style="position: relative; right: 115px" value="#{loginController.username}"
                                         id="txt_title" 
                                         title="Você deve inserir um e-mail válido com pelo menos 2 caracteres">

                            </p:inputText>
                            <p:tooltip for="txt_title" showEvent="focus" hideEvent="blur" id="tooltip1"/> 
                            <br/>

                            <h:outputLabel id="output2" style="position: relative; right: 10px" value="Senha : *"/>  
                            <h:inputSecret style="position: relative; right: 115px" value="#{loginController.password}"
                                         id="txt_title2" 
                                         title="Você deve inserir uma senha com pelo menos 2 caracteres">

                            </h:inputSecret>
                            <p:tooltip for="txt_title2" showEvent="focus" hideEvent="blur" id="tooltip2"/> 
                            <br/>

                           


                            <p:commandButton id="botaoLogin" style="width: 180px; height: 40px; font-size: small; position: relative; left: 90px" 
                                             value="Fazer login" actionListener="#{loginController.doLogin}"
                                             icon="ui-icon-disk" oncomplete="handleLoginRequest(xhr, status, args)}" update="growl" action="#{loginController.page()}"> 
                            </p:commandButton>
                            
                            
                            

                        </h:panelGrid>

                    </p:dialog>

                   

                </h:form>
                
                <script type="text/javascript">
            function handleLoginRequest(xhr, status, args) {
                if (args.validationFailed || !args.loggedIn) {
                    dlg.jq.effect("shake", {times: 5}, 100);
                }
                else {
                    dlg.hide();
                    $('#loginLink').fadeOut();
                }
            }
        </script>  
            </p:layoutUnit>
        </p:layout>
    </h:body>
</html>

